@model FinalProject.ViewModels.VmHome
@{
    Layout = null;
    List<string> wishlist = ViewBag.Wishlist;
    List<string> cart = ViewBag.Cart;
}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
          rel="stylesheet">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" />
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css" />
    <link rel="stylesheet" href="~/Public/css/style.css">
    <title>Document</title>
</head>
<body>
    <div id="homePage">
        <header>
            <div id="myNav">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <nav class="navbar navbar-expand-lg navbar-light">
                                <a class="navbar-brand" href="@Url.Action("Index","Home")"><img src="~/Uploads/Setting/@(ViewBag.Setting.LogoLight!=null?ViewBag.Setting.LogoLight:"")" alt=""></a>
                                <div class="d-flex">
                                    <button class="navbar-toggler" type="button" data-toggle="collapse"
                                            data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                                            aria-expanded="false" aria-label="Toggle navigation">
                                        <i class="fas fa-bars"></i>
                                    </button>
                                    <ul class="navbar-nav shop-nav">
                                        @*<li class="nav-item search">
                                    <a class="nav-link" href="#">
                                        <i class="fa fa-search"
                                           aria-hidden="true"></i>
                                    </a>
                                </li>*@
                                        <li class="nav-item dropdown dropdown-account screen-lg">
                                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown"
                                               role="button" data-toggle="dropdown" aria-haspopup="true"
                                               aria-expanded="false">
                                                <i class="far fa-user"></i>
                                            </a>
                                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                                <div class="account-title">
                                                    <h6>Welcome</h6>
                                                </div>
                                                <div class="dropdown-divider"></div>
                                                <ul>
                                                    <li>
                                                        <a href="@Url.Action("Index","User")">
                                                            <i class="fas fa-user-circle"></i>
                                                            <span>My Profile</span>
                                                        </a>
                                                    </li>
                                                    <li>
                                                        <a href="@Url.Action("Orders","User" )">
                                                            <i class="fas fa-box-open"></i>
                                                            <span>My orders</span>
                                                        </a>
                                                    </li>
                                                    <li>
                                                        <a href="@Url.Action("RecentlyView","User")">
                                                            <i class="fas fa-history"></i>
                                                            <span>Recently viewed</span>
                                                        </a>
                                                    </li>
                                                    <li>
                                                        <a href="@Url.Action("Index","Contact")">
                                                            <i class="fas fa-info-circle"></i>
                                                            <span>help & contact</span>
                                                        </a>
                                                    </li>
                                                </ul>
                                                <div class="sign-in-btn">
                                                    <a class="btn btn-black" href="@Url.Action("Login","User")">Login</a>
                                                    <span>or</span>
                                                    <a class="btn btn-pink" href="@Url.Action("Register","User")">Register</a>
                                                </div>
                                            </div>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="@Url.Action("Index","Shoping")">
                                                <i class="far fa-heart"></i>
                                            </a>
                                        </li>
                                        <li class="nav-item dropdown-cart">
                                            <a class="nav-link" href="@Url.Action("Cart","Shoping")">
                                                <i class="fas fa-shopping-cart"></i>
                                                <span class="cartCount">@ViewBag.CartCount</span>
                                            </a>
                                        </li>
                                    </ul>
                                    <div class="collapse navbar-collapse overflow-aito" id="navbarSupportedContent">
                                        <ul class="navbar-nav">
                                            <li class="nav-item">
                                                <a class="nav-link" href="@Url.Action("Index","Home")">
                                                    Home <span class="sr-only">(current)</span>
                                                </a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" href="@Url.Action("Index","About")">About Us</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" href="@Url.Action("Index","Contact")">Contact Us</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" href="@Url.Action("Index","Blogs")">Blog</a>
                                            </li>
                                            <li class="nav-item dropdown dropdown-product">
                                                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown"
                                                   role="button" data-toggle="dropdown" aria-haspopup="true"
                                                   aria-expanded="false">
                                                    Products
                                                    <i class="fas fa-angle-down"></i>
                                                </a>
                                                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                                    <ul class="category">
                                                        <div class="row no-gutters">
                                                            @if (ViewBag.Category != null)
                                                            {
                                                                foreach (var item in ViewBag.Category)
                                                                {
                                                                    <div class="col-lg-4 col-md-4 col-6">
                                                                        <li class="category-item">
                                                                            <a class="category-title" href="@Url.Action("Category","Product",new { id=item.Id})">@item.Name</a>
                                                                            <ul class="subcategory">
                                                                                @foreach (var sabCat in item.Subcategories)
                                                                                {
                                                                                    <li class="subcategory-item">
                                                                                        <a href="@Url.Action("Subcategory","Product",new { id=item.Id})">@sabCat.Name</a>
                                                                                    </li>
                                                                                }
                                                                            </ul>
                                                                        </li>
                                                                    </div>
                                                                }
                                                            }


                                                        </div>
                                                    </ul>
                                                    <ul class="sale-banner">
                                                        @foreach (var item in Model.Sales.Where(s => s.Content != null && s.StartDate < DateTime.Now && s.EndDate > DateTime.Now).Take(2))
                                                        {
                                                            <li>
                                                                <div class="single-banner">
                                                                    <div class="sale-img">
                                                                        <img src="~/Uploads/SaleBanner/@item.Image" alt="">
                                                                        <div class="sale-info">
                                                                            <p style="color:#292b2c;">@item.Title</p>
                                                                            <p style="color:#292b2c;">@item.Name</p>
                                                                            <a href="@Url.Action("SaleProduct","Home", new {id=item.Id })">Shop now</a>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </li>
                                                        }
                                                    </ul>
                                                </div>
                                            </li>
                                            <li class="nav-item dropdown dropdown-account screen-md">
                                                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown"
                                                   role="button" data-toggle="dropdown" aria-haspopup="true"
                                                   aria-expanded="false">
                                                    My Account
                                                    <i class="fas fa-angle-down"></i>
                                                </a>
                                                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                                    <ul>
                                                        <li>
                                                            <a href="@Url.Action("Index","User")">
                                                                <span>My Profile</span>
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <a href="@Url.Action("Orders","User" )">
                                                                <span>My orders</span>
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <a href="@Url.Action("RecentlyView","User")">
                                                                <span>Recently viewed</span>
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <a href="@Url.Action("Index","Contact")">
                                                                <span>help & contact</span>
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <a href="@Url.Action("Login","User")">
                                                                <span>Login</span>
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <a href="@Url.Action("Register","User")">
                                                                <span>Register</span>
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </li>
                                            <!-- <li class="nav-item screen-md">
                                    <a class="nav-link" href="#">
                                        Wishlist
                                    </a>
                                </li> -->
                                        </ul>
                                    </div>
                                </div>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <main>
            <section id="introHome">
                <div class="bg-img" style="background-image:url('/Uploads/Setting/@Model.setting.HomeImg')">
                    <div class="slide-area">
                        <div class="container">
                            <div class="row justify-content-center">
                                <div class="col-lg-7 col-md-10">
                                    <div class="myCarousel">
                                        @if (Model.Sales.Where(s => s.Content != null) != null)
                                        {
                                            foreach (var item in Model.Sales.Where(s => s.Content != null && s.StartDate < DateTime.Now && s.EndDate > DateTime.Now))
                                            {
                                                <div class="slide-banner">
                                                    <div class="banner-content">
                                                        <h5>@item.Title</h5>
                                                        <h2>@item.Name</h2>
                                                        <p>
                                                            @item.Content
                                                        </p>
                                                        <a href="@Url.Action("SaleProduct","Home", new {id=item.Id })" class="btn btn-white">shop now</a>
                                                    </div>
                                                </div>
                                            }
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="arrows">
                            <a href="#" class="slide-prev">
                                <i class="fas fa-chevron-left"></i>
                            </a>
                            <a href="#" class="slide-next">
                                <i class="fas fa-angle-right"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </section>
            <section id="categoriesArea">
                <div class="container">
                    <div class="categories">
                        <div class="row">
                            <div class="col-lg-3 col-md-4 col-sm-12">
                                <div class="title">
                                    <h4>Top Categories</h4>
                                    <p>There are many variations of passages of Lorem</p>
                                    <a href="@Url.Action("Index","Product")" class="btn-black">view all</a>
                                </div>
                            </div>
                            <div class="col-lg-9 col-md-8 col-sm-12">
                                <div class="owl-carousel owl-theme">
                                    @foreach (var item in Model.Categories)
                                    {
                                        <div class="single-category">
                                            <a href="@Url.Action("Category","Product",new { id=item.Id})">
                                                <i class="@item.IconClass"></i>
                                                <span>@item.Name</span>
                                            </a>
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- Session Area Start -->
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        @if (Session["SuccessfullSubscribe"] != null)
                        {
                            Session["SuccessfullSubscribe"] = null;
                        <div style="margin-top:1rem;" class="alert alert-success">
                            Thank you!
                        </div>
                        }
                        @if (Session["SameEmail"] != null)
                        {
                            Session["SameEmail"] = null;
                            <div style="margin-top:1rem;" class="alert alert-danger">
                                This email already exists!
                            </div>
                        }
                        @if (Session["EmptyEmail"] != null)
                        {
                            Session["EmptyEmail"] = null;
                            <div style="margin-top:1rem;" class="alert alert-danger">
                                Please enter your e-mail address
                            </div>
                        }
                    </div>
                </div>
            </div>
            <!-- Session Area End -->
            <section id="productsArea">
                <div id="products">
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-lg-8 col-md-8">
                                <div class="title">
                                    <h2>Our Top Products</h2>
                                    <p>
                                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus blandit massa
                                        enim Nullam nunc varius.
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            @if (Model.productInfos.Where(t => t.isTopSelling == true) != null)
                            {
                                foreach (var item in Model.productInfos.Where(t => t.isTopSelling == true))
                                {
                                    <div class="col-lg-3 col-md-4 col-6">
                                        <div class="single-product">
                                            <div class="sale-area">
                                                @if (item.SalePercent != null)
                                                {
                                                    if (item.SaleBanner.StartDate < DateTime.Now && item.SaleBanner.EndDate > DateTime.Now)
                                                    {
                                                        <span>-@Convert.ToDecimal(item.SalePercent).ToString("#.00") %</span>
                                                    }
                                                }
                                            </div>
                                            <div class="wishlist">
                                                <a class="addToWishlist @(wishlist!=null?(wishlist.Contains(item.Id.ToString()) == true ? "acttive-wishlist":""):"")" data-id="@item.Id" href="#">
                                                    <i class="fas fa-heart"></i>
                                                </a>
                                            </div>
                                            <div class="product-img">
                                                <a href="@Url.Action("Details","Product",new { id=item.ProductId})">
                                                    <img class="w-100" src="~/Uploads/Product/@item.Images.FirstOrDefault().Name">
                                                </a>
                                            </div>
                                            <div class="content">
                                                <h6 style="text-transform:capitalize;">
                                                    <a href="@Url.Action("Details","Product",new { id=item.ProductId})">@item.Product.Name</a>
                                                </h6>
                                                <h6>
                                                    @if (item.SalePercent != null)
                                                    {
                                                        if (item.SaleBanner.StartDate < DateTime.Now && item.SaleBanner.EndDate > DateTime.Now)
                                                        {
                                                            <del><span class="ex-parice">$@item.Price.ToString("#.00")</span></del>
                                                            <span class="price">$@(Convert.ToDecimal(item.Price - ((item.Price * item.SalePercent) / 100)).ToString("#.00"))</span>
                                                        }
                                                        else
                                                        {
                                                            <span class="price">$@item.Price.ToString("#.00")</span>
                                                        }
                                                    }
                                                    else
                                                    {
                                                        <span class="price">$@item.Price.ToString("#.00")</span>
                                                    }
                                                </h6>
                                                @*<div class="rating">
                                                <div class="rating-bar">
                                                    <i class="far fa-star"></i>
                                                    <i class="far fa-star"></i>
                                                    <i class="far fa-star"></i>
                                                    <i class="far fa-star"></i>
                                                    <i class="far fa-star"></i>
                                                </div>
                                                <span>(@(item.Reviews!=null?item.Reviews.Count:0))</span>
                                            </div>*@
                                                <div class="addCart">
                                                    <a class="btn-pink" href="@Url.Action("Details","Product",new { id=item.ProductId})">View Product</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }
                            }

                        </div>
                    </div>
                </div>
            </section>
            <section id="specialOffersArea">
                <div id="products">
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-lg-8 col-md-8">
                                <div class="title">
                                    <h2>New Products</h2>
                                    <p>
                                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus blandit massa
                                        enim Nullam nunc varius.
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <div class="owl-carousel owl-theme">
                                    @foreach (var item in Model.productInfos.Where(p => p.isNew == true))
                                    {
                                        <div class="single-product">
                                            <div class="sale-area">
                                                @if (item.SalePercent != null)
                                                {
                                                    if (item.SaleBanner.StartDate < DateTime.Now && item.SaleBanner.EndDate > DateTime.Now)
                                                    {
                                                        <span>-@Convert.ToDecimal(item.SalePercent).ToString("#.00") %</span>
                                                    }
                                                }
                                            </div>
                                            <div class="wishlist">
                                                <a class="addToWishlist @(wishlist!=null?(wishlist.Contains(item.Id.ToString()) == true ? "acttive-wishlist":""):"")" data-id="@item.Id" href="#">
                                                    <i class="fas fa-heart"></i>
                                                </a>
                                            </div>
                                            <div class="product-img">
                                                <a href="@Url.Action("Details","Product",new { id=item.ProductId})">
                                                    <img class="w-100" src="~/Uploads/Product/@item.Images.FirstOrDefault().Name">
                                                </a>
                                            </div>
                                            <div class="content">
                                                <h6 style="text-transform:capitalize;">
                                                    <a href="@Url.Action("Details","Product",new { id=item.ProductId})">@item.Product.Name</a>
                                                </h6>
                                                <h6>
                                                    @if (item.SalePercent != null)
                                                    {
                                                        if (item.SaleBanner.StartDate < DateTime.Now && item.SaleBanner.EndDate > DateTime.Now)
                                                        {
                                                            <del><span class="ex-parice">$@item.Price.ToString("#.00")</span></del>
                                                            <span class="price">$@(Convert.ToDecimal(item.Price - ((item.Price * item.SalePercent) / 100)).ToString("#.00"))</span>
                                                        }
                                                        else
                                                        {
                                                            <span class="price">$@item.Price.ToString("#.00")</span>
                                                        }
                                                    }
                                                    else
                                                    {
                                                        <span class="price">$@item.Price.ToString("#.00")</span>
                                                    }
                                                </h6>
                                                @*<div class="rating">
                                                <div class="rating-bar">
                                                    <i class="far fa-star"></i>
                                                    <i class="far fa-star"></i>
                                                    <i class="far fa-star"></i>
                                                    <i class="far fa-star"></i>
                                                    <i class="far fa-star"></i>
                                                </div>
                                                <span>(@(item.Reviews!=null?item.Reviews.Count:0))</span>
                                            </div>*@
                                                <div class="addCart">
                                                    <a class="btn-pink" href="@Url.Action("Details","Product",new { id=item.ProductId})">View Product</a>
                                                </div>
                                            </div>
                                        </div>}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section id="blogArea">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-lg-8 col-md-8">
                            <div class="title">
                                <h2>Our Blogs</h2>
                                <p>
                                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus blandit massa
                                    enim Nullam nunc varius.
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        @foreach (var item in Model.Blogs.Take(3))
                        {
                            <div class="col-lg-4 col-md-6 col-sm-12">
                                <div class="single-blog">
                                    <div class="blog-img">
                                        <a href="@Url.Action("Details","Blogs",new { id=item.Id})">
                                            <img src="~/Uploads/Blog/@item.Images.FirstOrDefault().Name" alt="">
                                        </a>
                                    </div>
                                    <div class="blog-info">
                                        <h4>
                                            <a href="@Url.Action("Details","Blogs",new { id=item.Id})">
                                                @item.Title
                                            </a>
                                        </h4>
                                        <p>
                                            <span>
                                                <i class="far fa-calendar"></i>
                                                @item.CreateDate.ToString("dd MMM yyyy")
                                            </span>
                                            <span>
                                                <i class="far fa-calendar"></i>
                                                @(item.Comments!=null?item.Comments.Count:0)
                                            </span>
                                        </p>
                                    </div>
                                    <div class="blog-content">
                                        <p>
                                            @(item.Content.Length>130?Html.Raw(item.Content.Substring(0, 130)) :Html.Raw(item.Content))
                                        </p>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                </div>
            </section>

            <!-- Subscribe  Area Start -->
            @{
                Html.RenderPartial("~/Views/Shared/_Subscribe.cshtml", new FinalProject.ViewModels.VmSubscribe { Page = "Home" });
            }
            <!-- Subscribe  Area End -->
        </main>
        <footer>
            <section id="footer">
                <div class="footer-top">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-3 col-md-6 col-sm-12">
                                <div class="logo-area">
                                    <div class="logo">
                                        <a href="home.html"><img src="~/Uploads/Setting/@(ViewBag.Setting.LogoLight!=null?ViewBag.Setting.LogoLight:"")"></a>
                                        <p>
                                            If you are going to use of Lorem Ipsum need to
                                            be sure there isn't hidden of text
                                        </p>
                                    </div>
                                    <div class="soc-nets">
                                        <ul>
                                            @foreach (var item in ViewBag.Socials)
                                            {
                                                <li><a href="@item.Link"><i class="@item.IconClass"></i></a></li>
                                            }
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-2 col-md-3 col-sm-6">
                                <div class="footer-menu">
                                    <h5> Useful Links</h5>
                                    <ul>
                                        <li><a href="@Url.Action("Index","About")">About Us</a></li>
                                        <li><a href="@Url.Action("Index","Contact")">Location</a></li>
                                        <li><a href="@Url.Action("Index","Contact")">Contact</a></li>
                                        <li><a href="@Url.Action("Index","Faq")">Faq</a></li>
                                        <li><a href="@Url.Action("Index","Terms")">Terms and Conditions</a></li>

                                    </ul>
                                </div>
                            </div>
                            <div class="col-lg-2 col-md-3 col-sm-6">
                                <div class="footer-menu">
                                    <h5> Category</h5>
                                    <ul>
                                        @foreach (var item in Model.Categories.Take(5))
                                        {
                                            <li><a href="@Url.Action("Category","Product",new { id=item.Id})">@item.Name</a></li>
                                        }
                                    </ul>
                                </div>
                            </div>
                            <div class="col-lg-2 col-md-6 col-sm-6">
                                <div class="footer-menu">
                                    <h5>account</h5>
                                    <ul>
                                        <li><a href="@Url.Action("Index","User")">my account</a></li>
                                        <li><a href="@Url.Action("Oreders","User")">Order List</a></li>
                                        <li><a href="@Url.Action("RecentlyView","User")">Recently view</a></li>
                                        <li><a href="@Url.Action("Login","User")">Login</a></li>
                                        <li><a href="@Url.Action("Register","User")">Register</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6 col-sm-6">
                                <div class="contact-info">
                                    <h5>Contact info</h5>
                                    <ul>
                                        <li>
                                            <span><i class="fas fa-map-marker-alt"></i></span>
                                            <span>
                                                @(ViewBag.Contact.Address != null?ViewBag.Contact.Address:"")
                                            </span>
                                        </li>
                                        <li>
                                            <span>
                                                <i class="far fa-envelope"></i>
                                            </span><span>@(ViewBag.Contact.Email!=null? ViewBag.Contact.Email:"")</span>
                                        </li>
                                        <li>
                                            <span><i class="fas fa-phone"></i></span>
                                            <span>@(ViewBag.Contact.Phone!=null? ViewBag.Contact.Phone : "")</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="footer-bottom">
                    <div class="container">
                        <div class="row ">
                            <div class="col-12">
                                <div class="copyright">
                                    <p>Copyright @(ViewBag.Setting.Copyright!=null ? ViewBag.Setting.Copyright:"") . All rights reserved</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </footer>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://kit.fontawesome.com/25a8a55cf9.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <script src="~/Public/js/main.js"></script>
</body>
</html>